final class GunganTransList {
	array<array<string>> translate_1 = {
		{"ONE", "UNA"},
		{"TWO", "DUEY"},
		{"THREE", "DEE"},
		{"FOUR", "FOOSA"},
		{"FIVE", "FIFE"},
		{"SIX", "SEEKS"},
		{"SEVEN", "SEVIN"},
		{"EIGHT", "ATE-A"},
		{"NINE", "NINEE"},
		{"TEN", "TENSKA"},
		{"1", "UNA"},
		{"2", "DUEY"},
		{"3", "DEE"},
		{"4", "FOOSA"},
		{"5", "FIFE"},
		{"6", "SEEKS"},
		{"7", "SEVIN"},
		{"8", "ATE-A"},
		{"9", "NINEE"},
		{"10", "TENSKA"},
		{"VERY", "BERRY"},
		{"GREAT", "BOMBAD"},
		{"SUPERB", "BOMBAD"},
		{"SUPER", "BOMBAD"},
		{"SUPERIOR", "BOMBAD"},
		{"AWESOME", "BOMBAD"},
		{"LANDSPEEDER", "DOWOPEE"},
		{"I", "MESA"},
		{"ME", "MESA"},
		{"MY", "MOOLE"},
		{"MINE", "MOOLE"},
		{"MUCH", "MUI"},
		{"YOU", "YOUSA"},
		{"U", "YOUSA"},
		{"MONEY", "MULA"},
		{"CREDITS", "MULA"},
		{"YOUR", "YOUS"},
		{"HE", "HESA"},
		{"SHE", "SHESA"},
		{"WE", "WESA"},
		{"THEY", "DESA"},
		{"THERE", "DALEE"},
		{"THEM", "THEM-SA"},
		{"YES", "YESA"},
		{"NO", "NOSA"},
		{"THAT", "DAT"},
		{"THIS", "DIS"},
		{"K", "OKEEDAY"},
		{"OK", "OKEEDAY"},
		{"KK", "OKEEDAY"},
		{"OK", "OKEEDAY"},
		{"OKAY", "OKEE DAY"},
		{"OUTLANDER", "OUTLAUNDER"},
		{"LOOK", "LOOKY"},
		{"HAPPY", "SMILIN"},
		{"SMILING", "SMILIN"},
		{"SMILY", "SMILIN"},
		{"SMILEY", "SMILIN"},
		{"SAY", "SPAKE"},
		{"SPEAK", "SPAKE"},
		{"TELL", "SPAKE"},
		{"SHIP", "SKEEBEETLE"},
		{"WARSHIP", "SKEEBEETLE"},
		{"TANK", "SKEEBEETLE"},
		{"SPACECRAFT", "SKEEBEETLE"},
		{"SPACESHIP", "SKEEBEETLE"},
		{"PAL", "PALO"},
		{"FRIEND", "PALO"},
		{"BUDDY", "PALO"},
		{"PALS", "PALOS"},
		{"FRIENDS", "PALOS"},
		{"BUDDIES", "PALOS"},
		{"GO", "GOS"},
		{"HERE", "HAIR"},
		{"HELP", "HEP"},
		{"HUMAN", "HISEN"},
		{"STORY", "TELLO"},
		{"CRAZY", "NUTSEN"},
		{"INSANE", "NUTSEN"},
		{"LONG", "LONGO"},
		{"COOL", "HOT"},
		{"BOYS", "BOYOS"},
		{"MESS", "MESSEN"},
		{"MAKE", "MAKEN"},
		{"MAKES", "MAKEN"},
		{"MACHINE", "MACHINEEK"},
		{"DROID", "MACHINEEK"},
		{"ROBOT", "MACHINEEK"},
		{"BOT", "MACHINEEK"},
		{"MACHINES", "MACHINEEKS"},
		{"DROIDS", "MACHINEEKS"},
		{"ROBOTS", "MACHINEEKS"},
		{"BOTS", "MACHINEEKS"},
		{"HELLO", "HIDOE"},
		{"HEY", "HIDOE"},
		{"HI", "HIDOE"},
		{"THANK", "TANK YU"},
		{"THANKS", "TANK YU"},
		{"THX", "TANK YU"},
		{"TY", "TANK YU"},
		{"COWARD", "FRAISEE FROG"},
		{"BYE", "SELONGABYE"},
		{"BB", "SELONGABYE"},
		{"CYA", "SELONGABYE"},
		{"BE", "BESA"},
		{"CHAIR", "ECOUCH-EEE"},
		{"COUCH", "ECOUCH-EEE"},
		{"BENCH", "ECOUCH-EEE"},
		{"FLOOR", "FEETWALKEN"},
		{"SKY", "GANYA"},
		{"SKYBOX", "GANYA"},
		{"TRASH", "GERBAREENO"},
		{"GARBAGE", "GERBAREENO"},
		{"STOVE", "GASSER"},
		{"GOD", "GUD"},
		{"DRINK", "GUP"},
		{"OMG", "HATA HATA"},
		{"WIND", "HUFFMAKER"},
		{"FOREST", "LOGREENA"},
		{"DOWN", "NEB"},
		{"LOW", "NEB"},
		{"LOWER", "NEB"},
		{"FIRE", "OPADDA"},
		{"DIVE", "PADDLEWOMPY"},
		{"LOVE", "SHU"},
		{"RAIN", "SKEESH"},
		{"SWAMP", "STICKGOOSHY"},
		{"EATING", "TONGUE-GRABBEN"},
		{"EATIN", "TONGUE-GRABBEN"},
		{"UP", "TUP"},
		{"HIGH", "TUP"},
		{"HIGHER", "TUP"},
		{"DESSERT", "UMI-YUMI"},
		{"BLASTER", "WANGZEPPER"},
		{"TAUCANNON", "WANGZEPPER"},
		{"GAUSCANNON", "WANGZEPPER"},
		{"GAUSSCANNON", "WANGZEPPER"},
		{"LASERANNON", "WANGZEPPER"},
		{"TAUGUN", "WANGZEPPER"},
		{"GAUSGUN", "WANGZEPPER"},
		{"GAUSSGUN", "WANGZEPPER"},
		{"LASERGUN", "WANGZEPPER"},
		{"CHARGE", "YANZAWA"},
		{"THE", "DA"}
	};
	
	array<array<string>> translate_2 = {
		{"I", "AM", "MESA"},
		{"A", "LOT", "MUI"},
		{"U", "ARE", "YOUSA"},
		{"YOU", "ARE", "YOUSA"},
		{"U", "R", "YOUSA"},
		{"YOU", "R", "YOUSA"},
		{"DID", "U", "YOUSA"},
		{"DID", "YOU", "YOUSA"},
		{"HE", "IS", "HESA"},
		{"SHE", "IS", "SHESA"},
		{"DID", "HE", "HESA"},
		{"DID", "SHE", "SHESA"},
		{"WE", "ARE", "WESA"},
		{"WE", "R", "WESA"},
		{"DID", "WE", "WESA"},
		{"THEY", "ARE", "DAYSA"},
		{"THEY", "R", "DAYSA"},
		{"DID", "THEY", "DAYSA"},
		{"A", "STORY", "TELLO"},
		{"THE", "BEST", "BOMBAD"},
		{"VERY", "GOOD", "BOMBAD"},
		{"HEY", "THERE", "HEYO DALEE"},
		{"HELLO", "THERE", "HEYO DALEE"},
		{"HI", "THERE", "HEYO DALEE"},
		{"HOW", "RUDE", "HOW WUDE"},
		{"OH", "BOY", "OIE BOIE"},
		{"EXCUSE", "ME", "EX SQUEEZEE ME"},
		{"THANK", "YOU", "TANK YU"},
		{"THANK", "U", "TANK YU"},
		{"BYE", "BYE", "SELONGABYE"},
		{"IT", "IS", "ISA"},
		{"ENERGY", "BALL", "BODOOKA"},
		{"BIG", "MISTAKE", "BOOPJAK"},
		{"GOOD", "MANNERS", "KEECLUMBSEE"},
		{"DEEP", "OCEAN", "OME-GOOSA"},
		{"SWIMMING", "UNDERWATER", "PADDLEWOMPY"},
		{"SWIM", "UNDERWATER", "PADDLEWOMPY"},
		{"SWIMMING", "DOWN", "PADDLEWOMPY"},
		{"SWIM", "DOWN", "PADDLEWOMPY"},
		{"TAU", "CANNON", "WANGZEPPER"},
		{"GAUS", "CANNON", "WANGZEPPER"},
		{"GAUSS", "CANNON", "WANGZEPPER"},
		{"LASER", "CANNON", "WANGZEPPER"},
		{"TAU", "GUN", "WANGZEPPER"},
		{"GAUS", "GUN", "WANGZEPPER"},
		{"GAUSS", "GUN", "WANGZEPPER"},
		{"LASER", "GUN", "WANGZEPPER"},
		{"CAVALRY", "CHARGE", "YANZAWA"}
	};
	
	array<array<string>> translate_3 = {
		{"ALL", "OF", "YOU", "ALL-N YOUSE"},
		{"ALL", "OF", "U", "ALL-N YOUSE"},
		{"OH", "MY", "MY", "OYL MOOLE MOOLE"},
		{"I", "DONT", "KNOW", "MY NO KNOW"},
		{"THEY", "ARE", "THERE", "DAYSA DALEE"},
		{"THEY", "R", "THERE", "DAYSA DALEE"},
		{"THERE", "THEY", "ARE", "DALEE DAYSA"},
		{"THERE", "THEY", "R", "DALEE DAYSA"},
		{"I", "LOVE", "YOU", "MESA LUV YOUS"},
		{"I", "LOVE", "U", "MESA LUV YOUS"},
		{"SEE", "YOU", "LATER", "SELONGABYE"},
		{"OH", "MY", "GOODNESS", "HATA HATA"},
		{"OH", "MY", "GOD", "HATA HATA"},
		{"LAW", "OF", "BANISHMENT", "NOCOMBACKIE LAW"},
		{"DEEP", "OCEAN", "DEPTHS", "OME-GOOSA"},
		{"ENERGY", "BALL", "CATAPULT", "WHIZBOOMA"}
	};
	
	array<array<string>> translate_4 = {
		{"I", "DON", "T", "KNOW", "MY NO KNOW"},
		{"I", "DO", "NOT", "KNOW", "MY NO KNOW"},
		{"WHAT", "DID", "YOU", "SAY", "WHAT YOUSA SPAKE"},
		{"WHAT", "DID", "U", "SAY", "WHAT YOUSA SPAKE"}
	};
	
	array<array<string>> translate_5 = {
		{"I", "M", "NOT", "DOING", "ANYTHING", "MESA DOEN NUTTEN"},
		{"I", "AM", "NOT", "DOING", "ANYTHING", "MESA DOEN NUTTEN"},
		{"I", "M", "NOT", "DOIN", "ANYTHING", "MESA DOEN NUTTEN"},
		{"I", "AM", "NOT", "DOIN", "ANYTHING", "MESA DOEN NUTTEN"}
	};
	
	GunganTransList(){
	}
}

void PluginInit() {
	g_Module.ScriptInfo.SetAuthor( "CubeMath" );
	g_Module.ScriptInfo.SetContactInfo( "steamcommunity.com/id/CubeMath" );
	
	g_Hooks.RegisterHook( Hooks::Player::ClientSay, @ClientSayGungan );
}

bool isTextChar(char c) {
	if (c == 'A') return true;
	if (c == 'B') return true;
	if (c == 'C') return true;
	if (c == 'D') return true;
	if (c == 'E') return true;
	if (c == 'F') return true;
	if (c == 'G') return true;
	if (c == 'H') return true;
	if (c == 'I') return true;
	if (c == 'J') return true;
	if (c == 'K') return true;
	if (c == 'L') return true;
	if (c == 'M') return true;
	if (c == 'N') return true;
	if (c == 'O') return true;
	if (c == 'P') return true;
	if (c == 'Q') return true;
	if (c == 'R') return true;
	if (c == 'S') return true;
	if (c == 'T') return true;
	if (c == 'U') return true;
	if (c == 'V') return true;
	if (c == 'W') return true;
	if (c == 'X') return true;
	if (c == 'Y') return true;
	if (c == 'Z') return true;
	if (c == '0') return true;
	if (c == '1') return true;
	if (c == '2') return true;
	if (c == '3') return true;
	if (c == '4') return true;
	if (c == '5') return true;
	if (c == '6') return true;
	if (c == '7') return true;
	if (c == '8') return true;
	if (c == '9') return true;
	return false;
}

bool isTextNumber(char c) {
	if (c == '0') return true;
	if (c == '1') return true;
	if (c == '2') return true;
	if (c == '3') return true;
	if (c == '4') return true;
	if (c == '5') return true;
	if (c == '6') return true;
	if (c == '7') return true;
	if (c == '8') return true;
	if (c == '9') return true;
	return false;
}

HookReturnCode ClientSayGungan( SayParameters@ pParams ) {
	
	string str = pParams.GetCommand();
	string bigstr = str;
	bigstr = bigstr.ToUppercase();
	
	int textCounter = 0;
	int stuffCounter = 0;
	
	//-1 = Nothing
	//0 = Stuff
	//1 = Text
	int wasLastLetter = -1;
	bool isFirstText = false;
	
	for(uint i = 0; i < bigstr.Length(); ++i){
		if(i == 0){
			isFirstText = isTextChar(bigstr[i]);
		}
		
		if(isTextChar(bigstr[i])){
			if(wasLastLetter != 1){
				wasLastLetter = 1;
				++textCounter;
			}
		}else{
			if(wasLastLetter != 0){
				wasLastLetter = 0;
				++stuffCounter;
			}
		}
	}
	
	array<string> textArray;
	textArray.resize( textCounter );
	array<string> stuffArray;
	stuffArray.resize( stuffCounter );
	
	array<bool> isTranslated;
	isTranslated.resize( textCounter );
	
	//0 = small
	//1 = Camel
	//2 = LARGE
	array<int> caps;
	caps.resize( textCounter );
	
	for(uint i = 0; i < isTranslated.length(); ++i){
		isTranslated[i] = false;
		caps[i] = 0;
	}
	
	wasLastLetter = -1;
	textCounter = -1;
	stuffCounter = -1;
	
	for(uint i = 0; i < bigstr.Length(); ++i){
		if(isTextChar(bigstr[i])){
			if(wasLastLetter != 1){
				wasLastLetter = 1;
				++textCounter;
				textArray[textCounter] = "";
			}
			if(caps[textCounter]<2 && !isTextNumber(bigstr[i]) && (""+bigstr[i] == ""+str[i]))
				caps[textCounter] = caps[textCounter] + 1;
			
			textArray[textCounter] = textArray[textCounter] + bigstr[i];
		}else{
			if(wasLastLetter != 0){
				wasLastLetter = 0;
				++stuffCounter;
				stuffArray[stuffCounter] = "";
			}
			stuffArray[stuffCounter] = stuffArray[stuffCounter] + bigstr[i];
		}
	}
	++textCounter;
	++stuffCounter;
	
	GunganTransList gtl();
	
	for(int i = 0; i < textCounter-4; ++i){
		for(uint j = 0; j < gtl.translate_5.length(); ++j){
		
			bool transCheck = true;
			transCheck = transCheck && (textArray[i] == gtl.translate_5[j][0]);
			transCheck = transCheck && (textArray[i+1] == gtl.translate_5[j][1]);
			transCheck = transCheck && (textArray[i+2] == gtl.translate_5[j][2]);
			transCheck = transCheck && (textArray[i+3] == gtl.translate_5[j][3]);
			transCheck = transCheck && (textArray[i+4] == gtl.translate_5[j][4]);
			transCheck = transCheck && !isTranslated[i];
			transCheck = transCheck && !isTranslated[i+1];
			transCheck = transCheck && !isTranslated[i+2];
			transCheck = transCheck && !isTranslated[i+3];
			transCheck = transCheck && !isTranslated[i+4];
			
			if(transCheck){
				textArray[i] = gtl.translate_5[j][5];
				isTranslated[i] = true;
				
				for(int k = i+1; k < textCounter-4; ++k){
					textArray[k] = textArray[k+4];
					caps[k] = caps[k+4];
					isTranslated[k] = isTranslated[k+4];
					
					if(isFirstText){
						stuffArray[k-1] = stuffArray[k+3];
					}else{
						if(k+4 < stuffCounter)
							stuffArray[k] = stuffArray[k+4];
					}
				}
				
				stuffCounter = stuffCounter-4;
				textCounter = textCounter-4;
			}
		}
	}
	
	for(int i = 0; i < textCounter-3; ++i){
		for(uint j = 0; j < gtl.translate_4.length(); ++j){
		
			bool transCheck = true;
			transCheck = transCheck && (textArray[i] == gtl.translate_4[j][0]);
			transCheck = transCheck && (textArray[i+1] == gtl.translate_4[j][1]);
			transCheck = transCheck && (textArray[i+2] == gtl.translate_4[j][2]);
			transCheck = transCheck && (textArray[i+3] == gtl.translate_4[j][3]);
			transCheck = transCheck && !isTranslated[i];
			transCheck = transCheck && !isTranslated[i+1];
			transCheck = transCheck && !isTranslated[i+2];
			transCheck = transCheck && !isTranslated[i+3];
			
			if(transCheck){
				textArray[i] = gtl.translate_4[j][4];
				isTranslated[i] = true;
				
				for(int k = i+1; k < textCounter-3; ++k){
					textArray[k] = textArray[k+3];
					caps[k] = caps[k+3];
					isTranslated[k] = isTranslated[k+3];
					
					if(isFirstText){
						stuffArray[k-1] = stuffArray[k+2];
					}else{
						if(k+3 < stuffCounter)
							stuffArray[k] = stuffArray[k+3];
					}
				}
				
				stuffCounter = stuffCounter-3;
				textCounter = textCounter-3;
			}
		}
	}
	
	for(int i = 0; i < textCounter-2; ++i){
		for(uint j = 0; j < gtl.translate_3.length(); ++j){
		
			bool transCheck = true;
			transCheck = transCheck && (textArray[i] == gtl.translate_3[j][0]);
			transCheck = transCheck && (textArray[i+1] == gtl.translate_3[j][1]);
			transCheck = transCheck && (textArray[i+2] == gtl.translate_3[j][2]);
			transCheck = transCheck && !isTranslated[i];
			transCheck = transCheck && !isTranslated[i+1];
			transCheck = transCheck && !isTranslated[i+2];
			
			if(transCheck){
				textArray[i] = gtl.translate_3[j][3];
				isTranslated[i] = true;
				
				for(int k = i+1; k < textCounter-2; ++k){
					textArray[k] = textArray[k+2];
					caps[k] = caps[k+2];
					isTranslated[k] = isTranslated[k+2];
				
					if(isFirstText){
						stuffArray[k-1] = stuffArray[k+1];
					}else{
						if(k+2 < stuffCounter)
							stuffArray[k] = stuffArray[k+2];
					}
				}
				
				stuffCounter = stuffCounter-2;
				textCounter = textCounter-2;
			}
		}
	}
	
	for(int i = 0; i < textCounter-1; ++i){
		for(uint j = 0; j < gtl.translate_2.length(); ++j){
		
			bool transCheck = true;
			transCheck = transCheck && (textArray[i] == gtl.translate_2[j][0]);
			transCheck = transCheck && (textArray[i+1] == gtl.translate_2[j][1]);
			transCheck = transCheck && !isTranslated[i];
			transCheck = transCheck && !isTranslated[i+1];
			
			if(transCheck){
				textArray[i] = gtl.translate_2[j][2];
				isTranslated[i] = true;
				
				for(int k = i+1; k < textCounter-1; ++k){
					textArray[k] = textArray[k+1];
					caps[k] = caps[k+1];
					isTranslated[k] = isTranslated[k+1];
				
					if(isFirstText){
						stuffArray[k-1] = stuffArray[k];
					}else{
						if(k+1 < stuffCounter)
							stuffArray[k] = stuffArray[k+1];
					}
				}
				
				stuffCounter = stuffCounter-1;
				textCounter = textCounter-1;
			}
		}
	}
	
	for(int i = 0; i < textCounter; ++i){
		for(uint j = 0; j < gtl.translate_1.length(); ++j){
		
			bool transCheck = true;
			transCheck = transCheck && (textArray[i] == gtl.translate_1[j][0]);
			transCheck = transCheck && !isTranslated[i];
			
			if(transCheck){
				textArray[i] = gtl.translate_1[j][1];
				isTranslated[i] = true;
			}
		}
	}
	
	string finalStr = "Gungan "+pParams.GetPlayer().pev.netname+": ";
	bool runWhile = true;
	int stuffCounter2 = 0;
	int textCounter2 = 0;
	
	while(runWhile){
		if(isFirstText){
			if(caps[textCounter2]<2)
				textArray[textCounter2] = textArray[textCounter2].ToLowercase();
			if(caps[textCounter2]==1 && textArray[textCounter2].Length()>1)
				textArray[textCounter2] = textArray[textCounter2].SubString(0,1).ToUppercase() + textArray[textCounter2].SubString(1);
			if(caps[textCounter2]>0 && textArray[textCounter2].Length()<2)
				textArray[textCounter2] = textArray[textCounter2].ToUppercase();
			
			finalStr = finalStr + textArray[textCounter2];
			++textCounter2;
			isFirstText = false;
			
			runWhile = stuffCounter2 < stuffCounter;
		}else{
			finalStr = finalStr + stuffArray[stuffCounter2];
			++stuffCounter2;
			isFirstText = true;
			
			runWhile = textCounter2 < textCounter;
		}
	}
	
	pParams.ShouldHide = true;
	g_Game.AlertMessage( at_logged, "%1\n", finalStr );
	g_PlayerFuncs.ClientPrintAll( HUD_PRINTTALK, finalStr+"\n" );
	
	return HOOK_CONTINUE;
}
